// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.7.2 (stable) (Tue Mar 11 04:27:50 2025 -0700) on "macos_arm64"
// Module: packages/w_flux/src/component_client
// Flags: soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/w_flux/src/action'], (function load__packages__w_flux__src__component_client(dart_sdk, packages__w_flux__src__action) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const _js_helper = dart_sdk._js_helper;
  const _interceptors = dart_sdk._interceptors;
  const html = dart_sdk.html;
  const async = dart_sdk.async;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const component_common = packages__w_flux__src__action.src__component_common;
  var w_flux = Object.create(dart.library);
  var batched_redraws = Object.create(dart.library);
  var component_client = Object.create(dart.library);
  var $isEmpty = dartx.isEmpty;
  var $_get = dartx._get;
  var $_set = dartx._set;
  var $add = dartx.add;
  var $animationFrame = dartx.animationFrame;
  var $entries = dartx.entries;
  var $toList = dartx.toList;
  var $clear = dartx.clear;
  var $isNotEmpty = dartx.isNotEmpty;
  var $forEach = dartx.forEach;
  dart._checkModuleNullSafetyMode(true);
  const CT = Object.create({
    _: () => (C, CT)
  });
  var I = [
    "package:w_flux/src/mixins/batched_redraws.dart",
    "dart:core",
    "package:w_flux/src/component_client.dart"
  ];
  var _components = dart.privateName(batched_redraws, "_components");
  var _tick = dart.privateName(batched_redraws, "_tick");
  var _as = dart.privateName(dart_rti, "_as");
  batched_redraws._RedrawScheduler = class _RedrawScheduler extends core.Object {
    call(component, callback = null) {
      let t$361, t$360;
      if (this[_components][$isEmpty]) {
        this[_tick]();
      }
      t$360 = this[_components];
      t$361 = component;
      t$360[$_get](t$361) == null ? t$360[$_set](t$361, _interceptors.JSArray.of(dart_rti._Universe.eval(dart_rti._theUniverse(), "_interceptors|JSArray<core|Function>", true), [])) : null;
      if (callback != null) dart.nullCheck(this[_components][$_get](component))[$add](callback);
    }
    [_tick]() {
      let t$goto = 0, t$completer = async._makeAsyncAwaitCompleter(dart_rti._Universe.eval(dart_rti._theUniverse(), "@", true)), t$wrappedValue, t$iterator, asyncScope = Object.create(null), asyncScope$ = Object.create(null), asyncScope$0 = Object.create(null);
      var t$36async_tick = async._wrapJsFunctionForAsync((t$errorCode, t$result) => {
        if (t$errorCode === 1) return async._asyncRethrow(t$result, t$completer);
        while (true)
          switch (t$goto) {
            case 0:
              // Function start
              t$goto = 2;
              return async._asyncAwait(html.window[$animationFrame], t$36async_tick, t$completer);
            case 2:
              // returning from await.
              asyncScope.entries = this[_components][$entries][$toList]();
              this[_components][$clear]();
              t$iterator = asyncScope.entries[Symbol.iterator]();
            case 3:
              // for-of iterator update
              t$wrappedValue = t$iterator.next();
              if (t$wrappedValue.done) {
                // goto after for-of
                t$goto = 4;
                break;
              }
              asyncScope$0.entry = t$wrappedValue.value;
              asyncScope$ = Object.create(null);
              asyncScope$.component = asyncScope$0.entry.key;
              asyncScope$.callbacks = asyncScope$0.entry.value;
              if (!asyncScope$.component.shouldBatchRedraw) {
                // goto for-of iterator update
                t$goto = 3;
                break;
              }
              asyncScope$.chainedCallbacks = null;
              if (asyncScope$.callbacks[$isNotEmpty]) asyncScope$.chainedCallbacks = dart.fn((capturedAsyncScope => () => {
                capturedAsyncScope.callbacks[$forEach](dart.fn(callback => {
                  dart.dcall(callback, []);
                }, dart_rti._Universe.eval(dart_rti._theUniverse(), "~(core|Function)", true)));
              })(asyncScope$), dart_rti._Universe.eval(dart_rti._theUniverse(), "core|Null()", true));
              dart_rti._Universe.eval(dart_rti._theUniverse(), "react__react|Component", true)[_as](asyncScope$.component).setState(new _js_helper.LinkedMap.new(dart_rti._Universe.eval(dart_rti._theUniverse(), "_js_helper|LinkedMap<@,@>", true)), asyncScope$.chainedCallbacks);
              t$goto = 5;
              return async._asyncAwait(async.Future.new(dart_rti._Universe.eval(dart_rti._theUniverse(), "async|Future<core|Null>", true), dart.fn(() => {
              }, dart_rti._Universe.eval(dart_rti._theUniverse(), "core|Null()", true))), t$36async_tick, t$completer);
            case 5:
              // returning from await.
              // goto for-of iterator update
              t$goto = 3;
              break;
            case 4:
              // after for-of
              // implicit return
              return async._asyncReturn(null, t$completer);
          }
      });
      return async._asyncStartSync(t$36async_tick, t$completer);
    }
    static ['_#new#tearOff']() {
      return new batched_redraws._RedrawScheduler.new();
    }
  };
  (batched_redraws._RedrawScheduler.new = function() {
    this[_components] = new _js_helper.LinkedMap.new(dart_rti._Universe.eval(dart_rti._theUniverse(), "_js_helper|LinkedMap<w_flux__src__mixins__batched_redraws|BatchedRedraws,core|List<core|Function>>", true));
    ;
  }).prototype = batched_redraws._RedrawScheduler.prototype;
  dart.addRtiResources(batched_redraws._RedrawScheduler, ["w_flux__src__mixins__batched_redraws|_RedrawScheduler"]);
  dart.setMethodSignature(batched_redraws._RedrawScheduler, () => dart.global.Object.setPrototypeOf({
    call: _ti => dart_rti._Universe.eval(dart_rti._theUniverse(), "~(w_flux__src__mixins__batched_redraws|BatchedRedraws[@()?])", true),
    [_tick]: _ti => dart_rti._Universe.eval(dart_rti._theUniverse(), "async|Future<@>()", true)
  }, dart.getMethods(dart.global.Object.getPrototypeOf(batched_redraws._RedrawScheduler))));
  dart.setLibraryUri(batched_redraws._RedrawScheduler, I[0]);
  dart.setFieldSignature(batched_redraws._RedrawScheduler, () => dart.global.Object.setPrototypeOf({[_components]: {
      type: _ti => dart_rti._Universe.eval(dart_rti._theUniverse(), "core|Map<w_flux__src__mixins__batched_redraws|BatchedRedraws,core|List<core|Function>>", true),
      isConst: false,
      isFinal: false,
      libraryUri: I[1]
    }}, dart.getFields(dart.global.Object.getPrototypeOf(batched_redraws._RedrawScheduler))));
  var shouldBatchRedraw = dart.privateName(batched_redraws, "BatchedRedraws.shouldBatchRedraw");
  batched_redraws.BatchedRedraws = class BatchedRedraws extends core.Object {
    get shouldBatchRedraw() {
      return this[shouldBatchRedraw];
    }
    set shouldBatchRedraw(value) {
      this[shouldBatchRedraw] = value;
    }
    redraw(callback = null) {
      return batched_redraws._scheduleRedraw.call(this, callback);
    }
    static ['_#new#tearOff']() {
      return new batched_redraws.BatchedRedraws.new();
    }
  };
  (batched_redraws.BatchedRedraws.new = function() {
    this[shouldBatchRedraw] = true;
    ;
  }).prototype = batched_redraws.BatchedRedraws.prototype;
  dart.addRtiResources(batched_redraws.BatchedRedraws, ["w_flux__src__mixins__batched_redraws|BatchedRedraws"]);
  dart.setMethodSignature(batched_redraws.BatchedRedraws, () => dart.global.Object.setPrototypeOf({
    redraw: _ti => dart_rti._Universe.eval(dart_rti._theUniverse(), "~([@()?])", true)
  }, dart.getMethods(dart.global.Object.getPrototypeOf(batched_redraws.BatchedRedraws))));
  dart.setLibraryUri(batched_redraws.BatchedRedraws, I[0]);
  dart.setFieldSignature(batched_redraws.BatchedRedraws, () => dart.global.Object.setPrototypeOf({shouldBatchRedraw: {
      type: _ti => dart_rti._Universe.eval(dart_rti._theUniverse(), "core|bool", true),
      isConst: false,
      isFinal: false,
      libraryUri: I[1]
    }}, dart.getFields(dart.global.Object.getPrototypeOf(batched_redraws.BatchedRedraws))));
  dart.defineLazy(batched_redraws, {
    /*batched_redraws._scheduleRedraw*/get _scheduleRedraw() {
      return new batched_redraws._RedrawScheduler.new();
    },
    set _scheduleRedraw(value) {}
  });
  const FluxComponentCommon_BatchedRedraws$36 = class FluxComponentCommon_BatchedRedraws extends component_common.FluxComponentCommon {};
  (FluxComponentCommon_BatchedRedraws$36.new = function(_ti) {
    batched_redraws.BatchedRedraws.new.call(this);
    dart.global.Object.getPrototypeOf(FluxComponentCommon_BatchedRedraws$36).new.call(this, null);
  }).prototype = FluxComponentCommon_BatchedRedraws$36.prototype;
  dart.applyMixin(FluxComponentCommon_BatchedRedraws$36, batched_redraws.BatchedRedraws);
  component_client.FluxComponent = class FluxComponent extends FluxComponentCommon_BatchedRedraws$36 {
    componentWillUnmount() {
      this.shouldBatchRedraw = false;
      super.componentWillUnmount();
    }
  };
  (component_client.FluxComponent.new = function(_ti) {
    this.$ti = this.$ti || _ti || dart.getReifiedType(this);
    dart.global.Object.getPrototypeOf(component_client.FluxComponent).new.call(this, null);
    ;
  }).prototype = component_client.FluxComponent.prototype;
  dart.addRtiResources(component_client.FluxComponent, ["w_flux__src__component_client|FluxComponent"]);
  dart.setLibraryUri(component_client.FluxComponent, I[2]);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"_js_helper|LinkedMap":{"LinkedMap.K":"1","LinkedMap.V":"2","InternalMap.K":"1","InternalMap.V":"2","_js_helper|InternalMap":["1","2"],"MapBase.K":"1","MapBase.V":"2","collection|MapBase":["1","2"],"LinkedHashMap.K":"1","LinkedHashMap.V":"2","collection|LinkedHashMap":["1","2"],"HashMap.K":"1","HashMap.V":"2","collection|HashMap":["1","2"],"Map.K":"1","Map.V":"2","core|Map":["1","2"]},"_js_helper|InternalMap":{"InternalMap.K":"1","InternalMap.V":"2","MapBase.K":"1","MapBase.V":"2","collection|MapBase":["1","2"],"LinkedHashMap.K":"1","LinkedHashMap.V":"2","collection|LinkedHashMap":["1","2"],"HashMap.K":"1","HashMap.V":"2","collection|HashMap":["1","2"],"Map.K":"1","Map.V":"2","core|Map":["1","2"]},"collection|MapBase":{"MapBase.K":"1","MapBase.V":"2","Map.K":"1","Map.V":"2","core|Map":["1","2"]},"collection|LinkedHashMap":{"LinkedHashMap.K":"1","LinkedHashMap.V":"2","Map.K":"1","Map.V":"2","core|Map":["1","2"]},"collection|HashMap":{"HashMap.K":"1","HashMap.V":"2","Map.K":"1","Map.V":"2","core|Map":["1","2"]},"core|Map":{"Map.K":"1","Map.V":"2"},"core|List":{"List.E":"1","Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"core|Iterable":{"Iterable.E":"1"},"core|_ListIterable":{"_ListIterable.E":"1","EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"],"Iterable.E":"1","core|Iterable":["1"]},"_internal|EfficientLengthIterable":{"EfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_internal|HideEfficientLengthIterable":{"HideEfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_interceptors|JSArray":{"JSArray.E":"1","_interceptors|JavaScriptObject":[],"List.E":"1","core|List":["1"],"JSIndexable.E":"1","_interceptors|JSIndexable":["1"],"_js_helper|TrustedGetRuntimeType":[],"_interceptors|Interceptor":[],"_interceptors|JSObject":[],"Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"_interceptors|JavaScriptObject":{"_interceptors|Interceptor":[],"_interceptors|JSObject":[]},"_interceptors|JSIndexable":{"JSIndexable.E":"1"},"async|Future":{"Future.T":"1"},"w_flux__src__component_common|FluxComponentCommon":{"FluxComponentCommon.ActionsT":"1","FluxComponentCommon.StoresT":"2","react__react|Component":[],"w_common__src__common__disposable|Disposable":[],"w_common__src__common__disposable|_Disposable":[],"w_common__src__common__disposable_manager|DisposableManagerV7":[],"w_common__src__common__disposable_manager|LeakFlagger":[]},"w_common__src__common__disposable|Disposable":{"w_common__src__common__disposable|_Disposable":[],"w_common__src__common__disposable_manager|DisposableManagerV7":[],"w_common__src__common__disposable_manager|LeakFlagger":[]},"w_flux__src__component_client|FluxComponent":{"FluxComponent.ActionsT":"1","FluxComponent.StoresT":"2","FluxComponentCommon.ActionsT":"1","FluxComponentCommon.StoresT":"2","w_flux__src__component_common|FluxComponentCommon":["1","2"],"w_flux__src__mixins__batched_redraws|BatchedRedraws":[],"react__react|Component":[],"w_common__src__common__disposable|Disposable":[],"w_common__src__common__disposable|_Disposable":[],"w_common__src__common__disposable_manager|DisposableManagerV7":[],"w_common__src__common__disposable_manager|LeakFlagger":[]}}'));
  dart.trackLibraries("packages/w_flux/src/component_client", {
    "package:w_flux/w_flux.dart": w_flux,
    "package:w_flux/src/mixins/batched_redraws.dart": batched_redraws,
    "package:w_flux/src/component_client.dart": component_client
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["mixins/batched_redraws.dart","component_client.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAW2B,WAAY;UAKvB,OAAZ;AAJA,UAAI,AAAY;AACd;;AAGqB,cAAvB;cAAY,SAAS;MAArB,AAAW,AAAY,aAAX,iBAAZ,AAAW,aAAC,OAAe,gIAAJ;AAEvB,UAAI,QAAQ,UAAgC,AAAE,eAAxB,AAAW,yBAAC,SAAS,SAAO,QAAQ;IAC5D;;oCAEO;;;;;;;cACL;uCAAM,AAAO;;;cAGT,qBAAU,AAAY,AAAQ;cAClC,AAAY;2BACM,kBAAO;;;;;;gBAAzB;;;cAAS;;cACH,wBAAY,AAAM,kBAAD;cACjB,wBAAY,AAAM,kBAAD;mBAEhB,AAAU,qBAAD;;gBACZ;;;cAGU;kBAER,AAAU,qBAAD,8CACQ;AACP,gBAAV,4BAAS,WAAS,QAAC;AACT,6BAAR,QAAQ;;;cAKH,AAAoB,sFAA9B,qBAAS,8HAAkC,4BAAgB;cAG5D;uCAAM,oGAAO;;;;;cArBf;;;;;AAuBF;;;YA7BO;IA6BP;;;;;;IA1CoC,oBACA;;EA0CtC;;;;;;;;;;;;;;;IAgBO;;;;;;WAEQ;AAAiB,YAAA,AAAe,sCAAC,MAAM,QAAQ;IAAC;;;;;;IAFxD,0BAAoB;;EAG3B;;;;;;;;;;;;;MAjBiB,+BAAe;YAAG;;;;;;;;;;;;ACnB/B,+BAAoB;AACd;IACR;;;;;;EACF","file":"component_client.ddc.js"}');
  // Exports:
  return {
    w_flux: w_flux,
    src__mixins__batched_redraws: batched_redraws,
    src__component_client: component_client
  };
}));

//# sourceMappingURL=component_client.ddc.js.map
